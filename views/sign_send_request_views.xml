<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="sign_send_request_view_form_inherit_preview" model="ir.ui.view">
        <field name="name">sign.send.request.view.form.inherit.preview</field>
        <field name="model">sign.send.request</field>
        <field name="inherit_id" ref="sign.sign_send_request_view_form"/>
        <field name="arch" type="xml">
            
            <!-- Insert Buttons in the footer -->
            <xpath expr="//footer/button[@name='sign_directly']" position="before">
                
                <!-- Preview (New Tab) -->
                <button string="Preview" 
                        name="action_preview" 
                        type="object" 
                        class="btn-secondary" 
                        data-hotkey="p"
                        invisible="not context.get('active_model') or (not has_default_template and not template_id)"/>
                
                <!-- Download (PDF) -->
                <button string="Download PDF" 
                        name="action_download_preview" 
                        type="object" 
                        class="btn-secondary" 
                        data-hotkey="d"
                        invisible="not context.get('active_model') or (not has_default_template and not template_id)"/>
                        
            </xpath>

            <!-- Optional: Info Alert -->
            <xpath expr="//form" position="before">
                <div class="alert alert-info" role="alert" invisible="not context.get('active_model')">
                    <small>Fields matching Order names (e.g. <b>amount_total</b>) are auto-filled on Preview/Download.</small>
                </div>
            </xpath>

        </field>
    </record>
</odoo>